@import models.PreviousSchemeModel
@import config.FrontendAppConfig
@(previousSchemes: Vector[PreviousSchemeModel])(implicit request: Request[_])
@import uk.gov.hmrc.play.views.html.helpers.form
@import views.html.helpers.{errorSummary, formInputRadioGroup, backButtonWithProgress, input, inputWithCurrencySymbol, formInlineDateInput, hiddenField}

@main_template(Messages("page.previousInvestment.reviewPreviousSchemes.title")) {

@backButtonWithProgress(controllers.routes.PreviousSchemeController.show().toString, Messages("summaryQuestion.previousRFISection"))

<div class="grid-column">
    <div class="column-two-thirds">
        <h1 class="form-title heading-xlarge" id="main-heading">@Messages("page.previousInvestment.reviewPreviousSchemes.heading")</h1>
            <table id="previous-schemes-table">
            <thead>
            <tr>
                <th id="scheme-table-heading">@Messages("page.previousInvestment.reviewPreviousSchemes.scheme")</th>
                <th id="date-table-heading">@Messages("page.previousInvestment.reviewPreviousSchemes.dateOfShareIssue")</th>
                <th id="amount-table-heading">@Messages("page.previousInvestment.reviewPreviousSchemes.investmentAmount")</th>
                <th>
                    <span class="visuallyhidden">
                        @Messages("common.base.change")
                    </span>
                </th>
                <th>
                    <span class="visuallyhidden">
                        @Messages("common.base.remove")
                    </span>
                </th>
            </tr>
            </thead>
            <tbody>
            @for((previousScheme, index) <- previousSchemes.zipWithIndex) {
                <tr>
                    <td id="scheme-type-@{index}">@previousScheme.schemeTypeDesc</td>
                    <td id="scheme-date-@{index}">@PreviousSchemeModel.toDateString(previousScheme.day.get, previousScheme.month.get, previousScheme.year.get)</td>
                    <td id="scheme-amount-@{index}">@PreviousSchemeModel.getAmountAsFormattedString(previousScheme.investmentAmount)</td>
                    <td id="change-@{index}"><a id="change-ref-@{index}" href="@routes.PreviousSchemeController.show(previousScheme.processingId).toString">@Messages("common.base.change")</a></td>
                    <td id="remove-@{index}"> @form(action = controllers.routes.PreviousSchemeController.delete(previousScheme.processingId.getOrElse(0))) {
                        <button class="button--link-style font-xsmall" type="submit" id="remove-link-@{index}"> @Messages("common.base.remove")</button>
                        }</td>
                </tr>
            }
            <tr>
                <td id="add-scheme"><a href="@routes.PreviousSchemeController.show(None).toString">@Messages("page.previousInvestment.reviewPreviousSchemes.add")</a></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            </tbody>
        </table>

        @form(action = controllers.routes.ReviewPreviousSchemesController.submit()) {
            <div class="form-group">
                <button class="btn button" type="submit" id="next">@Messages("common.button.continueThirdSection")</button>
            </div>
        }

    </div>
</div>
}
